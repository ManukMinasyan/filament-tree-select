var di=Object.defineProperty,ui=(e,t,s)=>t in e?di(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s,c=(e,t,s)=>(ui(e,typeof t!="symbol"?t+"":t,s),s),jt=(e,t,s)=>{if(!t.has(e))throw TypeError("Cannot "+s)},l=(e,t,s)=>(jt(e,t,"read from private field"),s?s.call(e):t.get(e)),h=(e,t,s)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,s)},m=(e,t,s,i)=>(jt(e,t,"write to private field"),i?i.call(e,s):t.set(e,s),s),a=(e,t,s)=>(jt(e,t,"access private method"),s),Ft={arrowUp:'<svg xmlns="http://www.w3.org/2000/svg" width="15" height="15" viewBox="0 0 25 25" fill="none" stroke="#000000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 15l-6-6-6 6"/></svg>',arrowDown:'<svg xmlns="http://www.w3.org/2000/svg" width="15" height="15" viewBox="0 0 25 25" fill="none" stroke="#000000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M6 9l6 6 6-6"/></svg>',arrowRight:'<svg xmlns="http://www.w3.org/2000/svg" width="15" height="15" viewBox="0 0 25 25" fill="none" stroke="#000000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M9 18l6-6-6-6"/></svg>',attention:'<svg xmlns="http://www.w3.org/2000/svg" width="15" height="15" viewBox="0 0 25 25" fill="none" stroke="#000000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"></path><line x1="12" y1="9" x2="12" y2="13"></line><line x1="12" y1="17" x2="12.01" y2="17"></line></svg>',clear:'<svg xmlns="http://www.w3.org/2000/svg" width="15" height="15" viewBox="0 0 25 25" fill="none" stroke="#000000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"></circle><line x1="15" y1="9" x2="9" y2="15"></line><line x1="9" y1="9" x2="15" y2="15"></line></svg>',cross:'<svg xmlns="http://www.w3.org/2000/svg" width="15" height="15" viewBox="0 0 25 25" fill="none" stroke="#000000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>',check:'<svg xmlns="http://www.w3.org/2000/svg" width="15" height="15" viewBox="0 0 25 25" fill="none" stroke="#000000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="20 6 9 17 4 12"></polyline></svg>',partialCheck:'<svg xmlns="http://www.w3.org/2000/svg" width="15" height="15" viewBox="0 0 25 25" fill="none" stroke="#000000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="5" y1="12" x2="19" y2="12"></line></svg>'},A=(e,t)=>{if(t.innerHTML="",typeof e=="string")t.innerHTML=e;else{let s=e.cloneNode(!0);t.appendChild(s)}},Ut=e=>{let t=e?{...e}:{};return Object.keys(Ft).forEach(s=>{t[s]||(t[s]=Ft[s])}),t},pi=e=>e.reduce((t,{name:s},i)=>(t+=s,i<e.length-1&&(t+=", "),t),""),H,y,z,L,Ae,js,R,te,Be,zt,He,Yt,F,se,P,M,Pe,Rs,Ve,Jt,Me,Fs,Ge,Kt,Ie,Xt,$e,Qt,De,Zt,qe,es,je,Us,Re,ts,Fe,ss,Ue,zs,ze,is,Ye,ls,Je,ns,Ke,as,he,Xe,Qe=class{constructor({value:t,showTags:s,tagsCountText:i,clearable:n,isAlwaysOpened:o,searchable:r,placeholder:u,disabled:f,isSingleSelect:k,id:w,ariaLabel:v,iconElements:b,inputCallback:g,searchCallback:x,openCallback:C,closeCallback:Y,keydownCallback:I,focusCallback:J,blurCallback:_,nameChangeCallback:E}){h(this,Ae),h(this,R),h(this,Be),h(this,He),h(this,F),h(this,P),h(this,Pe),h(this,Ve),h(this,Me),h(this,Ge),h(this,Ie),h(this,$e),h(this,De),h(this,qe),h(this,je),h(this,Re),h(this,Fe),h(this,Ue),h(this,ze),h(this,Ye),h(this,Je),h(this,Ke),h(this,he),c(this,"value"),c(this,"showTags"),c(this,"tagsCountText"),c(this,"clearable"),c(this,"isAlwaysOpened"),c(this,"searchable"),c(this,"placeholder"),c(this,"disabled"),c(this,"isSingleSelect"),c(this,"id"),c(this,"ariaLabel"),c(this,"iconElements"),c(this,"isOpened"),c(this,"searchText"),c(this,"srcElement"),h(this,H,void 0),h(this,y,void 0),h(this,z,void 0),h(this,L,void 0),c(this,"inputCallback"),c(this,"searchCallback"),c(this,"openCallback"),c(this,"closeCallback"),c(this,"keydownCallback"),c(this,"focusCallback"),c(this,"blurCallback"),c(this,"nameChangeCallback"),this.value=t,this.showTags=s,this.tagsCountText=i,this.searchable=r,this.placeholder=u,this.clearable=n,this.isAlwaysOpened=o,this.disabled=f,this.isSingleSelect=k,this.id=w,this.ariaLabel=v,this.iconElements=b,this.isOpened=!1,this.searchText="",m(this,H,a(this,Me,Fs).call(this)),m(this,y,a(this,je,Us).call(this)),m(this,z,a(this,Ue,zs).call(this)),m(this,L,null),this.inputCallback=g,this.searchCallback=x,this.openCallback=C,this.closeCallback=Y,this.keydownCallback=I,this.focusCallback=J,this.blurCallback=_,this.nameChangeCallback=E,this.srcElement=a(this,Pe,Rs).call(this,l(this,H),l(this,y),l(this,z)),a(this,Ae,js).call(this)}focus(){setTimeout(()=>l(this,y).focus(),0)}blur(){this.isOpened&&a(this,P,M).call(this),this.clearSearch(),l(this,y).blur()}updateValue(t){this.value=t,a(this,R,te).call(this),a(this,F,se).call(this)}removeItem(t){this.value=this.value.filter(s=>s.id!==t),a(this,he,Xe).call(this),a(this,R,te).call(this),a(this,F,se).call(this)}clear(){this.value=[],a(this,he,Xe).call(this),a(this,R,te).call(this),this.clearSearch()}openClose(){a(this,P,M).call(this)}clearSearch(){this.searchText="",this.searchCallback(""),a(this,F,se).call(this)}};H=new WeakMap,y=new WeakMap,z=new WeakMap,L=new WeakMap,Ae=new WeakSet,js=function(){a(this,R,te).call(this),a(this,F,se).call(this),a(this,Be,zt).call(this)},R=new WeakSet,te=function(){if(l(this,H).innerHTML="",this.showTags){l(this,H).append(...a(this,Ge,Kt).call(this));let e=pi(this.value);this.nameChangeCallback(e)}else{let e=a(this,qe,es).call(this);l(this,H).appendChild(e),this.nameChangeCallback(e.innerText)}l(this,H).appendChild(l(this,y))},Be=new WeakSet,zt=function(){let e=[];l(this,z).innerHTML="",this.clearable&&e.push(a(this,ze,is).call(this)),this.isAlwaysOpened||e.push(a(this,Je,ns).call(this,this.isOpened)),e.length&&l(this,z).append(...e)},He=new WeakSet,Yt=function(){if(!this.isAlwaysOpened&&l(this,L)){let e=this.isOpened?this.iconElements.arrowUp:this.iconElements.arrowDown;A(e,l(this,L))}},F=new WeakSet,se=function(){var e;(e=this.value)!=null&&e.length?(l(this,y).removeAttribute("placeholder"),this.srcElement.classList.remove("treeselect-input--value-not-selected")):(l(this,y).setAttribute("placeholder",this.placeholder),this.srcElement.classList.add("treeselect-input--value-not-selected")),this.searchable?this.srcElement.classList.remove("treeselect-input--unsearchable"):this.srcElement.classList.add("treeselect-input--unsearchable"),this.isSingleSelect?this.srcElement.classList.add("treeselect-input--is-single-select"):this.srcElement.classList.remove("treeselect-input--is-single-select"),l(this,y).value=this.searchText},P=new WeakSet,M=function(){this.isOpened=!this.isOpened,a(this,He,Yt).call(this),this.isOpened?this.openCallback():this.closeCallback()},Pe=new WeakSet,Rs=function(e,t,s){let i=document.createElement("div");return i.classList.add("treeselect-input"),i.setAttribute("tabindex","-1"),i.addEventListener("mousedown",n=>a(this,Ve,Jt).call(this,n)),i.addEventListener("focus",()=>this.focusCallback(),!0),i.addEventListener("blur",()=>this.blurCallback(),!0),e.appendChild(t),i.append(e,s),i},Ve=new WeakSet,Jt=function(e){e.stopPropagation(),this.isOpened||a(this,P,M).call(this),this.focus()},Me=new WeakSet,Fs=function(){let e=document.createElement("div");return e.classList.add("treeselect-input__tags"),e},Ge=new WeakSet,Kt=function(){return this.value.map(e=>{let t=document.createElement("div");t.classList.add("treeselect-input__tags-element"),t.setAttribute("tabindex","-1"),t.setAttribute("tag-id",e.id.toString()),t.setAttribute("title",e.name);let s=a(this,$e,Qt).call(this,e.name),i=a(this,De,Zt).call(this);return t.addEventListener("mousedown",n=>a(this,Ie,Xt).call(this,n,e.id)),t.append(s,i),t})},Ie=new WeakSet,Xt=function(e,t){e.preventDefault(),e.stopPropagation(),this.removeItem(t),this.focus()},$e=new WeakSet,Qt=function(e){let t=document.createElement("span");return t.classList.add("treeselect-input__tags-name"),t.textContent=e,t},De=new WeakSet,Zt=function(){let e=document.createElement("span");return e.classList.add("treeselect-input__tags-cross"),A(this.iconElements.cross,e),e},qe=new WeakSet,es=function(){let e=document.createElement("span");if(e.classList.add("treeselect-input__tags-count"),!this.value.length)return e.textContent="",e.setAttribute("title",""),e;let t=this.value.length===1?this.value[0].name:`${this.value.length} ${this.tagsCountText}`;return e.textContent=t,e.setAttribute("title",t),e},je=new WeakSet,Us=function(){let e=document.createElement("input");return e.classList.add("treeselect-input__edit"),this.id&&e.setAttribute("id",this.id),(!this.searchable||this.disabled)&&e.setAttribute("readonly","readonly"),this.disabled&&e.setAttribute("tabindex","-1"),this.ariaLabel.length&&e.setAttribute("aria-label",this.ariaLabel),e.addEventListener("keydown",t=>a(this,Re,ts).call(this,t)),e.addEventListener("input",t=>a(this,Fe,ss).call(this,t,e)),e},Re=new WeakSet,ts=function(e){e.stopPropagation();let t=e.key;t==="Backspace"&&!this.searchText.length&&this.value.length&&!this.showTags&&this.clear(),t==="Backspace"&&!this.searchText.length&&this.value.length&&this.removeItem(this.value[this.value.length-1].id),e.code==="Space"&&(!this.searchText||!this.searchable)&&a(this,P,M).call(this),(t==="Enter"||t==="ArrowDown"||t==="ArrowUp")&&e.preventDefault(),this.keydownCallback(e),t!=="Tab"&&this.focus()},Fe=new WeakSet,ss=function(e,t){e.stopPropagation();let s=this.searchText,i=t.value.trim();if(s.length===0&&i.length===0){t.value="";return}if(this.searchable){let n=e.target.value;this.searchCallback(n),this.isOpened||a(this,P,M).call(this)}else t.value="";this.searchText=t.value},Ue=new WeakSet,zs=function(){let e=document.createElement("div");return e.classList.add("treeselect-input__operators"),e},ze=new WeakSet,is=function(){let e=document.createElement("span");return e.classList.add("treeselect-input__clear"),e.setAttribute("tabindex","-1"),A(this.iconElements.clear,e),e.addEventListener("mousedown",t=>a(this,Ye,ls).call(this,t)),e},Ye=new WeakSet,ls=function(e){e.preventDefault(),e.stopPropagation(),(this.searchText.length||this.value.length)&&this.clear(),this.focus()},Je=new WeakSet,ns=function(e){m(this,L,document.createElement("span")),l(this,L).classList.add("treeselect-input__arrow");let t=e?this.iconElements.arrowUp:this.iconElements.arrowDown;return A(t,l(this,L)),l(this,L).addEventListener("mousedown",s=>a(this,Ke,as).call(this,s)),l(this,L)},Ke=new WeakSet,as=function(e){e.stopPropagation(),e.preventDefault(),this.focus(),a(this,P,M).call(this)},he=new WeakSet,Xe=function(){this.inputCallback(this.value)};var Ys=(e,t,s,i)=>{fi(t);let n=t.filter(o=>!o.disabled&&e.some(r=>r===o.id));if(s&&n.length){n[0].checked=!0;return}n.forEach(o=>{o.checked=!0;let r=Rt(o,t,i);o.checked=r})},Rt=({id:e,checked:t},s,i)=>{let n=s.find(r=>r.id===e);if(!n)return!1;if(i)return n.checked=n.disabled?!1:!!t,n.checked;let o=Js(!!t,n,s);return Ks(n,s),o},Js=(e,t,s)=>{if(!t.isGroup)return t.checked=t.disabled?!1:!!e,t.isPartialChecked=!1,t.checked;let i=s.filter(n=>n.childOf===t.id);return!e||t.disabled||t.isPartialChecked?(t.checked=!1,t.isPartialChecked=!1,Ze(t,i,s),t.checked):Xs(i,s)?Qs(i)?(t.checked=!1,t.isPartialChecked=!1,t.disabled=!0,t.checked):(t.checked=!1,t.isPartialChecked=!0,i.forEach(n=>{Js(e,n,s)}),t.checked):(t.checked=!0,t.isPartialChecked=!1,Ze(t,i,s),t.checked)},Ks=(e,t)=>{let s=t.find(i=>i.id===e.childOf);s&&(mi(s,t),Ks(s,t))},mi=(e,t)=>{let s=Le(e,t);if(Qs(s)){e.checked=!1,e.isPartialChecked=!1,e.disabled=!0;return}if(ki(s)){e.checked=!0,e.isPartialChecked=!1;return}if(wi(s)){e.checked=!1,e.isPartialChecked=!0;return}e.checked=!1,e.isPartialChecked=!1},Ze=({checked:e,disabled:t},s,i)=>{s.forEach(n=>{n.disabled=!!t||!!n.disabled,n.checked=!!e&&!n.disabled,n.isPartialChecked=!1;let o=Le(n,i);Ze({checked:e,disabled:t},o,i)})},Xs=(e,t)=>e.some(s=>s.disabled)?!0:e.some(s=>{if(s.isGroup){let i=Le(s,t);return Xs(i,t)}return!1}),Qs=e=>e.every(t=>!!t.disabled),ki=e=>e.every(t=>!!t.checked),wi=e=>e.some(t=>!!t.checked||!!t.isPartialChecked),fi=e=>{e.forEach(t=>{t.checked=!1,t.isPartialChecked=!1})},vi=(e,t,s)=>{let i={level:0,groupId:""},n=Zs(e,t,i.groupId,i.level);return gi(n,s)},Zs=(e,t,s,i)=>e.reduce((n,o)=>{var r;let u=!!((r=o.children)!=null&&r.length),f=i>=t&&u,k=i>t;if(n.push({id:o.value,name:o.name,childOf:s,isGroup:u,checked:!1,isPartialChecked:!1,level:i,isClosed:f,hidden:k,disabled:o.disabled??!1}),u){let w=Zs(o.children,t,o.value,i+1);n.push(...w)}return n},[]),Le=({id:e},t)=>t.filter(s=>s.childOf===e),bi=e=>{let{ungroupedNodes:t,allGroupedNodes:s,allNodes:i}=e.reduce((o,r)=>(r.checked&&(o.allNodes.push(r),r.isGroup?o.allGroupedNodes.push(r):o.ungroupedNodes.push(r)),o),{ungroupedNodes:[],allGroupedNodes:[],allNodes:[]}),n=i.filter(o=>!s.some(({id:r})=>r===o.childOf));return{ungroupedNodes:t,groupedNodes:n,allNodes:i}},gi=(e,t)=>(e.filter(s=>!!s.disabled).forEach(({id:s})=>Rt({id:s,checked:!1},e,t)),e),ye=(e,{id:t,isClosed:s})=>{Le({id:t},e).forEach(i=>{i.hidden=s??!1,i.isGroup&&!i.isClosed&&ye(e,{id:i.id,isClosed:s})})},Ci=e=>{e.filter(t=>t.isGroup&&!t.disabled&&(t.checked||t.isPartialChecked)).forEach(t=>{t.isClosed=!1,ye(e,t)})},Ei=(e,t)=>{let s=Si(e,t);e.forEach(i=>{s.some(({id:n})=>n===i.id)?(i.isGroup&&(i.isClosed=!1,ye(e,i)),i.hidden=!1):i.hidden=!0})},Si=(e,t)=>e.reduce((s,i)=>{if(i.name.toLowerCase().includes(t.toLowerCase())){if(s.push(i),i.isGroup){let n=ei(i.id,e);s.push(...n)}if(i.childOf){let n=ti(i.childOf,e);s.push(...n)}}return s},[]),ei=(e,t)=>t.reduce((s,i)=>(i.childOf===e&&(s.push(i),i.isGroup&&s.push(...ei(i.id,t))),s),[]),ti=(e,t)=>t.reduce((s,i)=>(i.id===e&&(s.push(i),i.childOf&&s.push(...ti(i.childOf,t))),s),[]),Li=e=>{let{duplications:t}=e.reduce((s,i)=>(s.allItems.some(n=>n.toString()===i.id.toString())&&s.duplications.push(i.id),s.allItems.push(i.id),s),{duplications:[],allItems:[]});t.length&&console.error(`Validation: You have duplicated values: ${t.join(", ")}! You should use unique values.`)},yi=(e,t,s,i,n,o,r,u,f,k)=>{Ys(e,t,n,f),u&&r&&Ci(t),ve(t,s,i,o,k)},ve=(e,t,s,i,n)=>{e.forEach(o=>{let r=t.querySelector(`[input-id="${o.id}"]`),u=O(r);r.checked=o.checked,xi(o,u,i),_i(o,u),Wi(o,u),Ti(o,u,s),Oi(o,u),Ai(o,u,e,n),Ni(o,r,s)}),Bi(e,t)},xi=(e,t,s)=>{e.checked?t.classList.add("treeselect-list__item--checked"):t.classList.remove("treeselect-list__item--checked"),Array.isArray(s)&&s[0]===e.id&&!e.disabled?t.classList.add("treeselect-list__item--single-selected"):t.classList.remove("treeselect-list__item--single-selected")},_i=(e,t)=>{e.isPartialChecked?t.classList.add("treeselect-list__item--partial-checked"):t.classList.remove("treeselect-list__item--partial-checked")},Wi=(e,t)=>{e.disabled?t.classList.add("treeselect-list__item--disabled"):t.classList.remove("treeselect-list__item--disabled")},Ti=(e,t,s)=>{if(e.isGroup){let i=t.querySelector(".treeselect-list__item-icon"),n=e.isClosed?s.arrowRight:s.arrowDown;A(n,i),e.isClosed?t.classList.add("treeselect-list__item--closed"):t.classList.remove("treeselect-list__item--closed")}},Oi=(e,t)=>{e.hidden?t.classList.add("treeselect-list__item--hidden"):t.classList.remove("treeselect-list__item--hidden")},Ni=(e,t,s)=>{let i=t.parentNode.querySelector(".treeselect-list__item-checkbox-icon");e.checked?A(s.check,i):e.isPartialChecked?A(s.partialCheck,i):i.innerHTML=""},Ai=(e,t,s,i)=>{let n=e.level===0,o=20,r=5;if(n){let u=s.some(w=>w.isGroup&&w.level===e.level),f=!e.isGroup&&u?`${o}px`:`${r}px`,k=e.isGroup?"0":f;i?t.style.paddingRight=k:t.style.paddingLeft=k}else{let u=e.isGroup?`${e.level*o}px`:`${e.level*o+o}px`;i?t.style.paddingRight=u:t.style.paddingLeft=u}t.setAttribute("level",e.level.toString()),t.setAttribute("group",e.isGroup.toString())},Bi=(e,t)=>{let s=e.some(n=>!n.hidden),i=t.querySelector(".treeselect-list__empty");s?i.classList.add("treeselect-list__empty--hidden"):i.classList.remove("treeselect-list__empty--hidden")},O=e=>e.parentNode.parentNode,hs=(e,t)=>t.find(s=>s.id.toString()===e),Hi=e=>O(e).querySelector(".treeselect-list__item-icon"),Pi=(e,t)=>{t&&Object.keys(t).forEach(s=>{let i=t[s];typeof i=="string"&&e.setAttribute(s,i)})},U,G,N,ce,et,si,tt,ii,st,li,it,cs,lt,os,nt,rs,oe,xe,at,ds,ht,us,ct,ps,re,_e,ot,ms,rt,ks,dt,ws,ut,fs,pt,vs,mt,bs,kt,gs,wt,Cs,ft,Es,vt,Ss,bt,Ls,de,We,be,gt,Ct,ys,Et=class{constructor({options:t,value:s,openLevel:i,listSlotHtmlComponent:n,emptyText:o,isSingleSelect:r,iconElements:u,showCount:f,disabledBranchNode:k,expandSelected:w,isIndependentNodes:v,rtl:b,inputCallback:g,arrowClickCallback:x,mouseupCallback:C}){h(this,et),h(this,tt),h(this,st),h(this,it),h(this,lt),h(this,nt),h(this,oe),h(this,at),h(this,ht),h(this,ct),h(this,re),h(this,ot),h(this,rt),h(this,dt),h(this,ut),h(this,pt),h(this,mt),h(this,kt),h(this,wt),h(this,ft),h(this,vt),h(this,bt),h(this,de),h(this,be),h(this,Ct),c(this,"options"),c(this,"value"),c(this,"openLevel"),c(this,"listSlotHtmlComponent"),c(this,"emptyText"),c(this,"isSingleSelect"),c(this,"showCount"),c(this,"disabledBranchNode"),c(this,"expandSelected"),c(this,"isIndependentNodes"),c(this,"rtl"),c(this,"iconElements"),c(this,"searchText"),c(this,"flattedOptions"),c(this,"flattedOptionsBeforeSearch"),c(this,"selectedNodes"),c(this,"srcElement"),c(this,"inputCallback"),c(this,"arrowClickCallback"),c(this,"mouseupCallback"),h(this,U,null),h(this,G,!0),h(this,N,[]),h(this,ce,!0),this.options=t,this.value=s,this.openLevel=i??0,this.listSlotHtmlComponent=n??null,this.emptyText=o??"No results found...",this.isSingleSelect=r??!1,this.showCount=f??!1,this.disabledBranchNode=k??!1,this.expandSelected=w??!1,this.isIndependentNodes=v??!1,this.rtl=b??!1,this.iconElements=u,this.searchText="",this.flattedOptions=vi(this.options,this.openLevel,this.isIndependentNodes),this.flattedOptionsBeforeSearch=this.flattedOptions,this.selectedNodes={nodes:[],groupedNodes:[],allNodes:[]},this.srcElement=a(this,st,li).call(this),this.inputCallback=g,this.arrowClickCallback=x,this.mouseupCallback=C,Li(this.flattedOptions)}updateValue(t){this.value=t,m(this,N,this.isSingleSelect?this.value:[]),yi(t,this.flattedOptions,this.srcElement,this.iconElements,this.isSingleSelect,l(this,N),this.expandSelected,l(this,ce),this.isIndependentNodes,this.rtl),m(this,ce,!1),a(this,be,gt).call(this)}updateSearchValue(t){if(t===this.searchText)return;let s=this.searchText===""&&t!=="";this.searchText=t,s&&(this.flattedOptionsBeforeSearch=JSON.parse(JSON.stringify(this.flattedOptions))),this.searchText===""&&(this.flattedOptions=this.flattedOptionsBeforeSearch.map(i=>{let n=this.flattedOptions.find(o=>o.id===i.id);return n.isClosed=i.isClosed,n.hidden=i.hidden,n}),this.flattedOptionsBeforeSearch=[]),this.searchText&&Ei(this.flattedOptions,t),ve(this.flattedOptions,this.srcElement,this.iconElements,l(this,N),this.rtl),this.focusFirstListElement()}callKeyAction(t){m(this,G,!1);let s=this.srcElement.querySelector(".treeselect-list__item--focused");if(s?.classList.contains("treeselect-list__item--hidden"))return;let i=t.key;i==="Enter"&&s&&s.dispatchEvent(new Event("mousedown")),(i==="ArrowLeft"||i==="ArrowRight")&&a(this,et,si).call(this,s,t),(i==="ArrowDown"||i==="ArrowUp")&&a(this,tt,ii).call(this,s,i)}focusFirstListElement(){let t="treeselect-list__item--focused",s=this.srcElement.querySelector(`.${t}`),i=Array.from(this.srcElement.querySelectorAll(".treeselect-list__item-checkbox")).filter(n=>window.getComputedStyle(O(n)).display!=="none");i.length&&(s&&s.classList.remove(t),O(i[0]).classList.add(t))}isLastFocusedElementExist(){return!!l(this,U)}};U=new WeakMap,G=new WeakMap,N=new WeakMap,ce=new WeakMap,et=new WeakSet,si=function(e,t){if(!e)return;let s=t.key,i=e.querySelector(".treeselect-list__item-checkbox").getAttribute("input-id"),n=hs(i,this.flattedOptions),o=e.querySelector(".treeselect-list__item-icon");s==="ArrowLeft"&&!n.isClosed&&n.isGroup&&(o.dispatchEvent(new Event("mousedown")),t.preventDefault()),s==="ArrowRight"&&n.isClosed&&n.isGroup&&(o.dispatchEvent(new Event("mousedown")),t.preventDefault())},tt=new WeakSet,ii=function(e,t){var s;let i=Array.from(this.srcElement.querySelectorAll(".treeselect-list__item-checkbox")).filter(n=>window.getComputedStyle(O(n)).display!=="none");if(i.length)if(!e)O(i[0]).classList.add("treeselect-list__item--focused");else{let n=i.findIndex(g=>O(g).classList.contains("treeselect-list__item--focused"));O(i[n]).classList.remove("treeselect-list__item--focused");let o=t==="ArrowDown"?n+1:n-1,r=t==="ArrowDown"?0:i.length-1,u=i[o]??i[r],f=!i[o],k=O(u);k.classList.add("treeselect-list__item--focused");let w=this.srcElement.getBoundingClientRect(),v=k.getBoundingClientRect();if(f&&t==="ArrowDown"){this.srcElement.scroll(0,0);return}if(f&&t==="ArrowUp"){this.srcElement.scroll(0,this.srcElement.scrollHeight);return}let b=((s=this.listSlotHtmlComponent)==null?void 0:s.clientHeight)??0;if(w.y+w.height<v.y+v.height+b){this.srcElement.scroll(0,this.srcElement.scrollTop+v.height);return}if(w.y>v.y){this.srcElement.scroll(0,this.srcElement.scrollTop-v.height);return}}},st=new WeakSet,li=function(){let e=a(this,it,cs).call(this),t=a(this,oe,xe).call(this,this.options);e.append(...t);let s=a(this,ht,us).call(this);e.append(s);let i=a(this,at,ds).call(this);return i&&e.append(i),e},it=new WeakSet,cs=function(){let e=document.createElement("div");return e.classList.add("treeselect-list"),this.isSingleSelect&&e.classList.add("treeselect-list--single-select"),this.disabledBranchNode&&e.classList.add("treeselect-list--disabled-branch-node"),e.addEventListener("mouseout",t=>a(this,lt,os).call(this,t)),e.addEventListener("mousemove",()=>a(this,nt,rs).call(this)),e.addEventListener("mouseup",()=>this.mouseupCallback(),!0),e},lt=new WeakSet,os=function(e){e.stopPropagation(),l(this,U)&&l(this,G)&&l(this,U).classList.add("treeselect-list__item--focused")},nt=new WeakSet,rs=function(){m(this,G,!0)},oe=new WeakSet,xe=function(e){return e.reduce((t,s)=>{var i;if((i=s.children)!=null&&i.length){let o=a(this,ct,ps).call(this,s),r=a(this,oe,xe).call(this,s.children);return o.append(...r),t.push(o),t}let n=a(this,re,_e).call(this,s,!1);return t.push(n),t},[])},at=new WeakSet,ds=function(){if(!this.listSlotHtmlComponent)return null;let e=document.createElement("div");return e.classList.add("treeselect-list__slot"),e.appendChild(this.listSlotHtmlComponent),e},ht=new WeakSet,us=function(){let e=document.createElement("div");e.classList.add("treeselect-list__empty"),e.setAttribute("title",this.emptyText);let t=document.createElement("span");t.classList.add("treeselect-list__empty-icon"),A(this.iconElements.attention,t);let s=document.createElement("span");return s.classList.add("treeselect-list__empty-text"),s.textContent=this.emptyText,e.append(t,s),e},ct=new WeakSet,ps=function(e){let t=document.createElement("div");t.setAttribute("group-container-id",e.value.toString()),t.classList.add("treeselect-list__group-container");let s=a(this,re,_e).call(this,e,!0);return t.appendChild(s),t},re=new WeakSet,_e=function(e,t){let s=a(this,ot,ms).call(this,e);if(t){let o=a(this,pt,vs).call(this);s.appendChild(o),s.classList.add("treeselect-list__item--group")}let i=a(this,kt,gs).call(this,e),n=a(this,wt,Cs).call(this,e,t);return s.append(i,n),s},ot=new WeakSet,ms=function(e){let t=document.createElement("div");return Pi(t,e.htmlAttr),t.setAttribute("tabindex","-1"),t.setAttribute("title",e.name),t.classList.add("treeselect-list__item"),t.addEventListener("mouseover",()=>a(this,rt,ks).call(this,t),!0),t.addEventListener("mouseout",()=>a(this,dt,ws).call(this,t),!0),t.addEventListener("mousedown",s=>a(this,ut,fs).call(this,s,e)),t},rt=new WeakSet,ks=function(e){l(this,G)&&a(this,de,We).call(this,!0,e)},dt=new WeakSet,ws=function(e){l(this,G)&&(a(this,de,We).call(this,!1,e),m(this,U,e))},ut=new WeakSet,fs=function(e,t){var s;if(e.preventDefault(),e.stopPropagation(),(s=this.flattedOptions.find(n=>n.id===t.value))==null?void 0:s.disabled)return;let i=e.target.querySelector(".treeselect-list__item-checkbox");i.checked=!i.checked,a(this,vt,Ss).call(this,i,t)},pt=new WeakSet,vs=function(){let e=document.createElement("span");return e.setAttribute("tabindex","-1"),e.classList.add("treeselect-list__item-icon"),A(this.iconElements.arrowDown,e),e.addEventListener("mousedown",t=>a(this,mt,bs).call(this,t)),e},mt=new WeakSet,bs=function(e){e.preventDefault(),e.stopPropagation(),a(this,bt,Ls).call(this,e)},kt=new WeakSet,gs=function(e){let t=document.createElement("div");t.classList.add("treeselect-list__item-checkbox-container");let s=document.createElement("span");s.classList.add("treeselect-list__item-checkbox-icon"),s.innerHTML="";let i=document.createElement("input");return i.setAttribute("tabindex","-1"),i.setAttribute("type","checkbox"),i.setAttribute("input-id",e.value.toString()),i.classList.add("treeselect-list__item-checkbox"),t.append(s,i),t},wt=new WeakSet,Cs=function(e,t){let s=document.createElement("label");if(s.textContent=e.name,s.classList.add("treeselect-list__item-label"),t&&this.showCount){let i=a(this,ft,Es).call(this,e);s.appendChild(i)}return s},ft=new WeakSet,Es=function(e){let t=document.createElement("span"),s=this.flattedOptions.filter(i=>i.childOf===e.value);return t.textContent=`(${s.length})`,t.classList.add("treeselect-list__item-label-counter"),t},vt=new WeakSet,Ss=function(e,t){let s=this.flattedOptions.find(i=>i.id===t.value);if(s){if(s!=null&&s.isGroup&&this.disabledBranchNode){let i=Hi(e);i?.dispatchEvent(new Event("mousedown"));return}if(this.isSingleSelect){let[i]=l(this,N);if(s.id===i)return;m(this,N,[s.id]),Ys([s.id],this.flattedOptions,this.isSingleSelect,this.isIndependentNodes)}else{s.checked=e.checked;let i=Rt(s,this.flattedOptions,this.isIndependentNodes);e.checked=i}ve(this.flattedOptions,this.srcElement,this.iconElements,l(this,N),this.rtl),a(this,Ct,ys).call(this)}},bt=new WeakSet,Ls=function(e){var t,s;let i=(s=(t=e.target)==null?void 0:t.parentNode)==null?void 0:s.querySelector("[input-id]"),n=i?.getAttribute("input-id")??null,o=hs(n,this.flattedOptions);o&&(o.isClosed=!o.isClosed,ye(this.flattedOptions,o),ve(this.flattedOptions,this.srcElement,this.iconElements,l(this,N),this.rtl),this.arrowClickCallback(o.id,o.isClosed))},de=new WeakSet,We=function(e,t){let s="treeselect-list__item--focused";if(e){let i=Array.from(this.srcElement.querySelectorAll(`.${s}`));i.length&&i.forEach(n=>n.classList.remove(s)),t.classList.add(s)}else t.classList.remove(s)},be=new WeakSet,gt=function(){let{ungroupedNodes:e,groupedNodes:t,allNodes:s}=bi(this.flattedOptions);this.selectedNodes={nodes:e,groupedNodes:t,allNodes:s}},Ct=new WeakSet,ys=function(){a(this,be,gt).call(this),this.inputCallback(this.selectedNodes),this.value=this.selectedNodes.nodes.map(e=>e.id)};var xs=({parentHtmlContainer:e,staticList:t,appendToBody:s,isSingleSelect:i,value:n,direction:o})=>{e||console.error("Validation: parentHtmlContainer prop is required!"),t&&s&&console.error("Validation: You should set staticList to false if you use appendToBody!"),i&&Array.isArray(n)&&console.error("Validation: if you use isSingleSelect prop, you should pass a single value!"),!i&&!Array.isArray(n)&&console.error("Validation: you should pass an array as a value!"),o&&o!=="auto"&&o!=="bottom"&&o!=="top"&&console.error("Validation: you should pass (auto | top | bottom | undefined) as a value for the direction prop!")},ae=e=>e.map(t=>t.id),Vi=e=>e?Array.isArray(e)?e:[e]:[],Mi=(e,t)=>{if(t){let[s]=e;return s??null}return e},d,p,Q,ue,Z,W,T,S,V,pe,St,me,Te,Lt,_s,yt,Ws,xt,Ts,_t,Os,Wt,Ns,Tt,As,ge,Ot,Nt,Bs,At,Hs,Bt,Ps,Ht,Vs,Ce,Pt,Vt,ni,ie,Ee,ke,Oe,ee,we,Mt,Ms,fe,Ne,Gt,Gs,It,Is,$t,$s,Dt,Ds,qt,qs,Se=class{constructor({parentHtmlContainer:t,value:s,options:i,openLevel:n,appendToBody:o,alwaysOpen:r,showTags:u,tagsCountText:f,clearable:k,searchable:w,placeholder:v,grouped:b,isGroupedValue:g,listSlotHtmlComponent:x,disabled:C,emptyText:Y,staticList:I,id:J,ariaLabel:_,isSingleSelect:E,showCount:$,disabledBranchNode:B,direction:le,expandSelected:D,saveScrollPosition:K,isIndependentNodes:q,rtl:j,iconElements:ne,inputCallback:X,openCallback:ai,closeCallback:hi,nameChangeCallback:ci,searchCallback:oi,openCloseGroupCallback:ri}){h(this,pe),h(this,me),h(this,Lt),h(this,yt),h(this,xt),h(this,_t),h(this,Wt),h(this,Tt),h(this,ge),h(this,Nt),h(this,At),h(this,Bt),h(this,Ht),h(this,Ce),h(this,Vt),h(this,ie),h(this,ke),h(this,ee),h(this,Mt),h(this,fe),h(this,Gt),h(this,It),h(this,$t),h(this,Dt),h(this,qt),c(this,"parentHtmlContainer"),c(this,"value"),c(this,"options"),c(this,"openLevel"),c(this,"appendToBody"),c(this,"alwaysOpen"),c(this,"showTags"),c(this,"tagsCountText"),c(this,"clearable"),c(this,"searchable"),c(this,"placeholder"),c(this,"grouped"),c(this,"isGroupedValue"),c(this,"listSlotHtmlComponent"),c(this,"disabled"),c(this,"emptyText"),c(this,"staticList"),c(this,"id"),c(this,"ariaLabel"),c(this,"isSingleSelect"),c(this,"showCount"),c(this,"disabledBranchNode"),c(this,"direction"),c(this,"expandSelected"),c(this,"saveScrollPosition"),c(this,"isIndependentNodes"),c(this,"rtl"),c(this,"iconElements"),c(this,"inputCallback"),c(this,"openCallback"),c(this,"closeCallback"),c(this,"nameChangeCallback"),c(this,"searchCallback"),c(this,"openCloseGroupCallback"),c(this,"ungroupedValue"),c(this,"groupedValue"),c(this,"allValue"),c(this,"isListOpened"),c(this,"selectedName"),c(this,"srcElement"),h(this,d,null),h(this,p,null),h(this,Q,null),h(this,ue,0),h(this,Z,0),h(this,W,null),h(this,T,null),h(this,S,null),h(this,V,null),xs({parentHtmlContainer:t,value:s,staticList:I,appendToBody:o,isSingleSelect:E}),this.parentHtmlContainer=t,this.value=[],this.options=i??[],this.openLevel=n??0,this.appendToBody=o??!1,this.alwaysOpen=!!(r&&!C),this.showTags=u??!0,this.tagsCountText=f??"elements selected",this.clearable=k??!0,this.searchable=w??!0,this.placeholder=v??"Search...",this.grouped=b??!0,this.isGroupedValue=g??!1,this.listSlotHtmlComponent=x??null,this.disabled=C??!1,this.emptyText=Y??"No results found...",this.staticList=!!(I&&!this.appendToBody),this.id=J??"",this.ariaLabel=_??"",this.isSingleSelect=E??!1,this.showCount=$??!1,this.disabledBranchNode=B??!1,this.direction=le??"auto",this.expandSelected=D??!1,this.saveScrollPosition=K??!0,this.isIndependentNodes=q??!1,this.rtl=j??!1,this.iconElements=Ut(ne),this.inputCallback=X,this.openCallback=ai,this.closeCallback=hi,this.nameChangeCallback=ci,this.searchCallback=oi,this.openCloseGroupCallback=ri,this.ungroupedValue=[],this.groupedValue=[],this.allValue=[],this.isListOpened=!1,this.selectedName="",this.srcElement=null,a(this,pe,St).call(this,s)}mount(){xs({parentHtmlContainer:this.parentHtmlContainer,value:this.value,staticList:this.staticList,appendToBody:this.appendToBody,isSingleSelect:this.isSingleSelect}),this.iconElements=Ut(this.iconElements),a(this,pe,St).call(this,this.value)}updateValue(t){let s=Vi(t),i=l(this,d);i&&(i.updateValue(s),a(this,ge,Ot).call(this,i?.selectedNodes))}destroy(){this.srcElement&&(a(this,Ce,Pt).call(this),this.srcElement.innerHTML="",this.srcElement=null,a(this,ee,we).call(this,!0))}focus(){l(this,p)&&l(this,p).focus()}toggleOpenClose(){l(this,p)&&(l(this,p).openClose(),l(this,p).focus())}scrollWindowHandler(){this.updateListPosition()}focusWindowHandler(t){var s,i,n;(s=this.srcElement)!=null&&s.contains(t.target)||(i=l(this,d))!=null&&i.srcElement.contains(t.target)||((n=l(this,p))==null||n.blur(),a(this,ee,we).call(this,!1),a(this,ie,Ee).call(this,!1))}blurWindowHandler(){var t;(t=l(this,p))==null||t.blur(),a(this,ee,we).call(this,!1),a(this,ie,Ee).call(this,!1)}updateListPosition(){var t;let s=this.srcElement,i=(t=l(this,d))==null?void 0:t.srcElement;if(!s||!i)return;let{height:n}=i.getBoundingClientRect(),{x:o,y:r,height:u,width:f}=s.getBoundingClientRect(),k=window.innerHeight,w=r,v=k-r-u,b=w>v&&w>=n&&v<n;if(this.direction!=="auto"&&(b=this.direction==="top"),this.appendToBody){(i.style.top!=="0px"||i.style.left!=="0px")&&(i.style.top="0px",i.style.left="0px");let x=o+window.scrollX,C=b?r+window.scrollY-n:r+window.scrollY+u;i.style.transform=`translate(${x}px,${C}px)`,i.style.width=`${f}px`}let g=b?"top":"bottom";i.getAttribute("direction")!==g&&(i.setAttribute("direction",g),a(this,Vt,ni).call(this,b,this.appendToBody))}};d=new WeakMap,p=new WeakMap,Q=new WeakMap,ue=new WeakMap,Z=new WeakMap,W=new WeakMap,T=new WeakMap,S=new WeakMap,V=new WeakMap,pe=new WeakSet,St=function(e){var t;this.destroy();let{container:s,list:i,input:n}=a(this,Lt,_s).call(this);this.srcElement=s,m(this,d,i),m(this,p,n),m(this,W,this.scrollWindowHandler.bind(this)),m(this,T,this.scrollWindowHandler.bind(this)),m(this,S,this.focusWindowHandler.bind(this)),m(this,V,this.blurWindowHandler.bind(this)),this.alwaysOpen&&((t=l(this,p))==null||t.openClose()),this.disabled?this.srcElement.classList.add("treeselect--disabled"):this.srcElement.classList.remove("treeselect--disabled"),this.updateValue(e??this.value)},me=new WeakSet,Te=function({groupedNodes:e,nodes:t,allNodes:s}){this.ungroupedValue=t?ae(t):[],this.groupedValue=e?ae(e):[],this.allValue=s?ae(s):[];let i=[];this.isIndependentNodes||this.isSingleSelect?i=this.allValue:this.isGroupedValue?i=this.groupedValue:i=this.ungroupedValue,this.value=Mi(i,this.isSingleSelect)},Lt=new WeakSet,_s=function(){let e=this.parentHtmlContainer;e.classList.add("treeselect"),this.rtl&&e.setAttribute("dir","rtl");let t=new Et({value:[],options:this.options,openLevel:this.openLevel,listSlotHtmlComponent:this.listSlotHtmlComponent,emptyText:this.emptyText,isSingleSelect:this.isSingleSelect,showCount:this.showCount,disabledBranchNode:this.disabledBranchNode,expandSelected:this.expandSelected,isIndependentNodes:this.isIndependentNodes,rtl:this.rtl,iconElements:this.iconElements,inputCallback:i=>a(this,Nt,Bs).call(this,i),arrowClickCallback:(i,n)=>a(this,At,Hs).call(this,i,n),mouseupCallback:()=>{var i;return(i=l(this,p))==null?void 0:i.focus()}}),s=new Qe({value:[],showTags:this.showTags,tagsCountText:this.tagsCountText,clearable:this.clearable,isAlwaysOpened:this.alwaysOpen,searchable:this.searchable,placeholder:this.placeholder,disabled:this.disabled,isSingleSelect:this.isSingleSelect,id:this.id,ariaLabel:this.ariaLabel,iconElements:this.iconElements,inputCallback:i=>a(this,yt,Ws).call(this,i),searchCallback:i=>a(this,_t,Os).call(this,i),openCallback:()=>a(this,Ht,Vs).call(this),closeCallback:()=>a(this,Ce,Pt).call(this),keydownCallback:i=>a(this,xt,Ts).call(this,i),focusCallback:()=>a(this,Wt,Ns).call(this),blurCallback:()=>a(this,Tt,As).call(this),nameChangeCallback:i=>a(this,Bt,Ps).call(this,i)});return this.appendToBody&&m(this,Q,new ResizeObserver(()=>this.updateListPosition())),e.append(s.srcElement),{container:e,list:t,input:s}},yt=new WeakSet,Ws=function(e){var t,s;let i=ae(e);(t=l(this,d))==null||t.updateValue(i);let n=((s=l(this,d))==null?void 0:s.selectedNodes)??{};a(this,me,Te).call(this,n),a(this,fe,Ne).call(this)},xt=new WeakSet,Ts=function(e){var t;this.isListOpened&&((t=l(this,d))==null||t.callKeyAction(e))},_t=new WeakSet,Os=function(e){l(this,Z)&&clearTimeout(l(this,Z)),m(this,Z,window.setTimeout(()=>{var t;(t=l(this,d))==null||t.updateSearchValue(e),this.updateListPosition()},350)),a(this,Dt,Ds).call(this,e)},Wt=new WeakSet,Ns=function(){a(this,ie,Ee).call(this,!0),l(this,S)&&l(this,S)&&l(this,V)&&(document.addEventListener("mousedown",l(this,S),!0),document.addEventListener("focus",l(this,S),!0),window.addEventListener("blur",l(this,V)))},Tt=new WeakSet,As=function(){setTimeout(()=>{var e,t;let s=(e=l(this,p))==null?void 0:e.srcElement.contains(document.activeElement),i=(t=l(this,d))==null?void 0:t.srcElement.contains(document.activeElement);!s&&!i&&this.blurWindowHandler()},1)},ge=new WeakSet,Ot=function(e){var t;if(!e)return;let s=[];this.isIndependentNodes||this.isSingleSelect?s=e.allNodes:this.grouped?s=e.groupedNodes:s=e.nodes,(t=l(this,p))==null||t.updateValue(s),a(this,me,Te).call(this,e)},Nt=new WeakSet,Bs=function(e){var t,s,i;a(this,ge,Ot).call(this,e),this.isSingleSelect&&!this.alwaysOpen&&((t=l(this,p))==null||t.openClose(),(s=l(this,p))==null||s.clearSearch()),(i=l(this,p))==null||i.focus(),a(this,fe,Ne).call(this)},At=new WeakSet,Hs=function(e,t){var s;(s=l(this,p))==null||s.focus(),this.updateListPosition(),a(this,qt,qs).call(this,e,t)},Bt=new WeakSet,Ps=function(e){this.selectedName!==e&&(this.selectedName=e,a(this,Gt,Gs).call(this))},Ht=new WeakSet,Vs=function(){var e;this.isListOpened=!0,l(this,W)&&l(this,T)&&(window.addEventListener("scroll",l(this,W),!0),window.addEventListener("resize",l(this,T))),!(!l(this,d)||!this.srcElement)&&(this.appendToBody?(document.body.appendChild(l(this,d).srcElement),(e=l(this,Q))==null||e.observe(this.srcElement)):this.srcElement.appendChild(l(this,d).srcElement),this.updateListPosition(),a(this,ke,Oe).call(this,!0),a(this,Mt,Ms).call(this),a(this,It,Is).call(this))},Ce=new WeakSet,Pt=function(){var e;this.alwaysOpen||(this.isListOpened=!1,l(this,W)&&l(this,T)&&(window.removeEventListener("scroll",l(this,W),!0),window.removeEventListener("resize",l(this,T))),!l(this,d)||!this.srcElement)||!(this.appendToBody?document.body.contains(l(this,d).srcElement):this.srcElement.contains(l(this,d).srcElement))||(m(this,ue,l(this,d).srcElement.scrollTop),this.appendToBody?(document.body.removeChild(l(this,d).srcElement),(e=l(this,Q))==null||e.disconnect()):this.srcElement.removeChild(l(this,d).srcElement),a(this,ke,Oe).call(this,!1),a(this,$t,$s).call(this))},Vt=new WeakSet,ni=function(e,t){if(!l(this,d)||!l(this,p))return;let s=t?"treeselect-list--top-to-body":"treeselect-list--top",i=t?"treeselect-list--bottom-to-body":"treeselect-list--bottom";e?(l(this,d).srcElement.classList.add(s),l(this,d).srcElement.classList.remove(i),l(this,p).srcElement.classList.add("treeselect-input--top"),l(this,p).srcElement.classList.remove("treeselect-input--bottom")):(l(this,d).srcElement.classList.remove(s),l(this,d).srcElement.classList.add(i),l(this,p).srcElement.classList.remove("treeselect-input--top"),l(this,p).srcElement.classList.add("treeselect-input--bottom"))},ie=new WeakSet,Ee=function(e){!l(this,p)||!l(this,d)||(e?(l(this,p).srcElement.classList.add("treeselect-input--focused"),l(this,d).srcElement.classList.add("treeselect-list--focused")):(l(this,p).srcElement.classList.remove("treeselect-input--focused"),l(this,d).srcElement.classList.remove("treeselect-list--focused")))},ke=new WeakSet,Oe=function(e){var t,s,i,n;e?(t=l(this,p))==null||t.srcElement.classList.add("treeselect-input--opened"):(s=l(this,p))==null||s.srcElement.classList.remove("treeselect-input--opened"),this.staticList?(i=l(this,d))==null||i.srcElement.classList.add("treeselect-list--static"):(n=l(this,d))==null||n.srcElement.classList.remove("treeselect-list--static")},ee=new WeakSet,we=function(e){!l(this,W)||!l(this,T)||!l(this,S)||!l(this,V)||((!this.alwaysOpen||e)&&(window.removeEventListener("scroll",l(this,W),!0),window.removeEventListener("resize",l(this,T))),document.removeEventListener("mousedown",l(this,S),!0),document.removeEventListener("focus",l(this,S),!0),window.removeEventListener("blur",l(this,V)))},Mt=new WeakSet,Ms=function(){var e,t,s;let i=(e=l(this,d))==null?void 0:e.isLastFocusedElementExist();this.saveScrollPosition&&i?(t=l(this,d))==null||t.srcElement.scroll(0,l(this,ue)):(s=l(this,d))==null||s.focusFirstListElement()},fe=new WeakSet,Ne=function(){var e;(e=this.srcElement)==null||e.dispatchEvent(new CustomEvent("input",{detail:this.value})),this.inputCallback&&this.inputCallback(this.value)},Gt=new WeakSet,Gs=function(){var e;(e=this.srcElement)==null||e.dispatchEvent(new CustomEvent("name-change",{detail:this.selectedName})),this.nameChangeCallback&&this.nameChangeCallback(this.selectedName)},It=new WeakSet,Is=function(){var e;this.alwaysOpen||((e=this.srcElement)==null||e.dispatchEvent(new CustomEvent("open",{detail:this.value})),this.openCallback&&this.openCallback(this.value))},$t=new WeakSet,$s=function(){var e;this.alwaysOpen||((e=this.srcElement)==null||e.dispatchEvent(new CustomEvent("close",{detail:this.value})),this.closeCallback&&this.closeCallback(this.value))},Dt=new WeakSet,Ds=function(e){var t;let s=e?.trim()??"";(t=this.srcElement)==null||t.dispatchEvent(new CustomEvent("search",{detail:s})),this.searchCallback&&this.searchCallback(s)},qt=new WeakSet,qs=function(e,t){var s;(s=this.srcElement)==null||s.dispatchEvent(new CustomEvent("open-close-group",{detail:{groupId:e,isClosed:t}})),this.openCloseGroupCallback&&this.openCloseGroupCallback(e,t)};function Gi({state:e,name:t,options:s,searchable:i,showCount:n,placeholder:o,rtl:r,disabledBranchNode:u=!0,disabled:f=!1,isSingleSelect:k=!0,showTags:w=!0,clearable:v=!0,isIndependentNodes:b=!0,alwaysOpen:g=!1,emptyText:x,expandSelected:C=!0,grouped:Y=!0,openLevel:I=0,direction:J="auto"}){return{state:e,tree:null,init(){this.tree=new Se({id:`tree-${t}-id`,ariaLabel:`tree-${t}-label`,parentHtmlContainer:this.$refs.tree,value:this.state,options:s,searchable:i,showCount:n,placeholder:o,disabledBranchNode:u,disabled:f,isSingleSelect:k,showTags:w,clearable:v,isIndependentNodes:b,alwaysOpen:g,emptyText:x,expandSelected:C,grouped:Y,openLevel:I,direction:J,rtl:r}),this.tree.srcElement.addEventListener("input",_=>{this.state=_.detail,this.state&&setTimeout(()=>this.ensureSelectedExpanded(),10)}),this.state&&setTimeout(()=>this.ensureSelectedExpanded(),100)},ensureSelectedExpanded(){if(!this.tree)return;let _=(E,$=1,B=3)=>{setTimeout(()=>{try{(Array.isArray(this.state)?this.state:[this.state]).forEach(D=>{if(!D||typeof D!="string"||!D.includes("."))return;let K=D.split("."),q="";for(let j=0;j<K.length-1;j++){q=q?`${q}.${K[j]}`:K[j];let ne=this.tree.srcElement.querySelector(`[data-treeselectjs-value="${q}"]`);if(ne){let X=ne.querySelector(".treeselectjs-node-icon-expand");X&&X.style.transform!=="rotate(90deg)"&&X.click()}}})}catch(le){$<B?_(E*2,$+1,B):console.warn("TreeSelect: Failed to auto-expand parent nodes",le)}},E)};if(_(50),typeof MutationObserver<"u"&&this.tree.srcElement){let E=new MutationObserver($=>{$.forEach(B=>{B.type==="attributes"&&(B.attributeName==="style"||B.attributeName==="class")&&window.getComputedStyle(this.tree.srcElement).display!=="none"&&_(50)})});E.observe(this.tree.srcElement,{attributes:!0,attributeFilter:["style","class"]}),setTimeout(()=>E.disconnect(),1e4)}}}}export{Gi as default};
